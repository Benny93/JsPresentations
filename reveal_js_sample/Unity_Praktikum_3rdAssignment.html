<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-16">

		<title>The marvelous World of Hand-Tracking</title>

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		
		<meta name="description" content="info slides for the 3rd assignment for the Unity Praktikum in SS15">
		<meta name="author" content="Johannes">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', use the PDF print sheet -->
		<script>
			document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
		</script>
		
		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<!--script>
		  if( window.location.search.match( /print-pdf/gi ) ) {
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		  }
		</script-->

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
		
		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/golden_night.css" id="theme">
		<style type="text/css">

			.listheader
            {
                margin-bottom:1px;margin-top:1px;text-align:left;
            }

            .info
            {
                font-size:18px;margin-top:1px;text-align:left;
            }
            
            .runninginfo
            {
                font-size:18px;margin-top:1px;text-align:left;left-margin:10px;color:#B4A069;
            }
            
            .container {
            	background: rgba(180,160,105,0.5);
			    margin:20px auto;
			    padding:20px auto;
			    position:relative;
			    width:800px auto;
			
			    border-radius:5px;
			    -moz-border-radius:5px;
			    -webkit-border-radius:5px;
			
			    box-shadow:5px 5px 25px rgba(180,160,105,0.5);
			
			    column-count: 2;
			    column-gap: 3em;
			    column-rule: 1px dashed #B4A069;
			    -moz-column-count: 2;
			    -moz-column-gap: 3em;
			    -moz-column-rule: 1px dashed #B4A069;
			    -webkit-column-count: 2;
			    -webkit-column-gap: 3em;
			    -webkit-column-rule: 1px dashed #B4A069;
			}
        </style>
	</head>

	<body>

		<div class="reveal">

			<div class="slides">
			
				<section data-background="images/logos/logo_combined.png">
            		<h2> The marvelous World of Hand-Tracking: </h2>
					<h3> API - Tasks - Issues </h3>
				</section>
				
				<section>
				
					<section>
						<h2> Overview </h2>
						
						<hr style="color: #B4A069; background: #B4A069; height: 5px;" />
						<ul style="text-align: center; list-style-type: none">
							<li> <b style="color: #B4A069; font-size: 35px"> Leap API </b> </li>
							<li> Tasks </li>
							<li> Issues </li>
						</ul>
						
						<hr style="color: #B4A069; background: #B4A069; height: 5px;" />
					</section>
					
					<section>
						<h2> New scripts at a Glance </h2>
						
						<hr style="color: #B4A069; background: #B4A069; height: 5px;" />
							<img width="960" height="580" src="images/imgs/all_scripts_annotated_small.png">
						<hr style="color: #B4A069; background: #B4A069; height: 5px;" />
					</section>
					
					<section>
						<h2> LeapInput: Accessing Raw Data </h2>
						
						<hr style="color: #B4A069; background: #B4A069; height: 5px;" />
							<ul style="text-align: left; margin-left: 2em">
								<li> initializes a <a href=https://developer.leapmotion.com/documentation/unity/api/Leap.Controller.html?proglang=unity>Leap.Controller</a> and stores data <a href=https://developer.leapmotion.com/documentation/unity/api/Leap.Frame.html>Frames</a> </li>
								<li> if you want to, you can register <b style="color: #B4A069"> custom listeners</b> to the according event handlers of LeapInput </li>
								<li> as you can see, LeapInput <b style="color: #B4A069">does not inherit from Monobehaviour...</b>
									<ul style="text-align: left; margin-left: 2em; list-style-type: square">
										<li> it is a <b style="color: #B4A069">static class</b>, which is not attached to a Gameobject </li>
										<li> it exists outside of the physics engine, <b style="color: #B4A069">threading restrictions do not apply</b> </li>
										<li> however, they <b style="color: #A51E37">might apply to classes using the handlers...</b></li>
									</ul>
								</li>
								<li> the Update() method retrieves the last Frame from the Controller </li>
							</ul>
						
						<hr style="color: #B4A069; background: #B4A069; height: 5px;" />
					</section>
					
					<section>
						<h2> LeapUnityExtensions: Matching Frames of Reference </h2>
						
						<hr style="color: #B4A069; background: #B4A069; height: 5px;" />
							<ul style="text-align: left; margin-left: 2em">
								<li> this static class provides utility functions to convert <a href=https://developer.leapmotion.com/documentation/csharp/api/Leap.Vector.html>Leap.Vector</a> and <a href=https://developer.leapmotion.com/documentation/csharp/api/Leap.Matrix.html>Leap.Matrix</a> objects into Unity <a href=http://docs.unity3d.com/ScriptReference/Vector3.html>Vector3</a> and <a href=http://docs.unity3d.com/ScriptReference/Quaternion.html>Quaternion</a> objects </li>
								<li> the  <b style="color: #B4A069">UnityVectorExtension</b> allows to...
									<ul style="text-align: left; margin-left: 2em; list-style-type: square">
										<li> <b style="color: #B4A069">match axes</b> between coordinate systems </li>
										<li> <b style="color: #B4A069">match scales</b> between coordinate systems </li>
										<li> <b style="color: #B4A069">convert Vectors</b></li>
									</ul>
								</li>
								<li> the  <b style="color: #B4A069">UnityMatrixExtension</b> allows to...
									<ul style="text-align: left; margin-left: 2em; list-style-type: square">
										<li> obtain <b style="color: #B4A069">Quaternions</b> from Leap matrices </li>
										<li> extract the <b style="color: #B4A069">translation</b> of a Leap matrix </li>
									</ul>
								</li>
							</ul>
						
						<hr style="color: #B4A069; background: #B4A069; height: 5px;" />
					</section>
					
					<section>
						<h2> HandController: Reaching for the VR </h2>
						
						<hr style="color: #B4A069; background: #B4A069; height: 5px;" />
							<ul style="text-align: left; margin-left: 2em">
								<li> obtains data via Leap.Input </li>
								<li> generates, tracks, and deletes Handmodels </li>
								<li> provides a list of physical, as well as graphic hand models </li>
								<li> modus operandi:
									<ul style="text-align: left; margin-left: 2em; list-style-type: square">
										<li> data is obtained in the <b style="color: #B4A069">Update()</b> method </li>
										<li> given the data, hand models are updated, created, or deleted in the <b style="color: #B4A069">UpdateHandModels()</b> method </li>
										<li> creation of handmodels is done within the <b style="color: #B4A069">CreateHand()</b> method </li>
									</ul>
								</li>
							</ul>
						<hr style="color: #B4A069; background: #B4A069; height: 5px;" />
					</section>
					
					<section>
						<h2> HandModel: The Root of Grasping </h2>
						
						<hr style="color: #B4A069; background: #B4A069; height: 5px;" />
							<ul style="text-align: left; margin-left: 2em">
								<li> stores a reference to the <a href=https://developer.leapmotion.com/documentation/unity/api/Leap.Hand.html?proglang=unity>Leap.Hand</a> it represents </li>
								<li> provides position, orientation, and direction of the <b style="color: #B4A069">hand, wrist, and lower arm</b> </li>
								<li> its an abstract class, heirs have to implement the
									<ul style="text-align: left; margin-left: 2em; list-style-type: square">
										<li> <b style="color: #B4A069">InitHand()</b> and </li>
										<li> <b style="color: #B4A069">UpdateHand()</b> methods </li>
									</ul>
								</li>
							</ul>
						
						<hr style="color: #B4A069; background: #B4A069; height: 5px;" />
					</section>
					
					<section>
						<h2> FingerModel: Abstract Endeffectors </h2>
						
						<hr style="color: #B4A069; background: #B4A069; height: 5px;" />
							<ul style="text-align: left; margin-left: 2em">
								<li> stores a reference to the <a href=https://developer.leapmotion.com/documentation/unity/api/Leap.Finger.html#csharpclass_leap_1_1_finger>Leap.Finger</a> it represents </li>
								<li> provides position and orientation of the finger <b style="color: #B4A069">joints</b> and the finger <b style="color: #B4A069">bones</b> </li>
								<li> its an abstract class, heirs have to implement the
									<ul style="text-align: left; margin-left: 2em; list-style-type: square">
										<li> <b style="color: #B4A069">InitFinger()</b> and </li>
										<li> <b style="color: #B4A069">UpdateFinger()</b> methods </li>
									</ul>
								</li>
							</ul>
						
						<hr style="color: #B4A069; background: #B4A069; height: 5px;" />
					</section>
					
					<section>
						<h2> Summary </h2>
						
						<hr style="color: #B4A069; background: #B4A069; height: 5px;" />
							<ul style="text-align: left; margin-left: 2em">
								<li> given the standard Leap classes we can... 
									<ul style="text-align: left; margin-left: 2em; list-style-type: square">
										<li> <b style="color: #B4A069">stream</b> Leap raw data </li>
										<li> <b style="color: #B4A069">create</b> hand visualizations </li>
										<li> <b style="color: #B4A069">animate</b> these hand models </li>
									</ul>
								</li>
								<li> the <a href=https://github.com/leapmotion-examples/LeapMotionCoreAssets>core assets</a> also contain some samples for object interactions (as well as an integration for the Oculus...) </li>
								<li> however, the actual <b style="color: #A51E37">grasping logic has to be implemented yet...</b></li>
							</ul>
						<hr style="color: #B4A069; background: #B4A069; height: 5px;" />
						
					</section>
					
				</section>
				
				<section>
				
					<section>
						<h2> Overview </h2>
						
						<hr style="color: #B4A069; background: #B4A069; height: 5px;" />
						<ul style="text-align: center; list-style-type: none">
							<li> Leap API </li>
							<li> <b style="color: #B4A069; font-size: 35px"> Tasks </b> </li>
							<li> Issues </li>
						</ul>
						
						<hr style="color: #B4A069; background: #B4A069; height: 5px;" />
					</section>
					
					<section>
						<h2>Challenges</h2>
						
						<hr style="color: #B4A069; background: #B4A069; height: 5px;" />
							<ul style="text-align: left; margin-left: 2em">
								<li> apply your <b style="color: #B4A069">grasp scripts on the Leap fingers</b> </li>
								<li> <b style="color: #B4A069">detect contacts</b> between finger tips and (target) objects </li>
								<li> <b style="color: #B4A069">validate the grasp</b> with respect to the grasping angle, and possibly the kind of finger tip (e.g. thumb has to be part of the grip etc.) </li>
								<li> <b style="color: #B4A069">carry the object</b>, i.e. adapt position and orientation </li>
								<li> <b style="color: #B4A069">Bonusspaßprogramm:</b> Implement some kind of <b style="color: #B4A069">locomotion</b>, for instance in terms of crawling </li>
							</ul>
						<hr style="color: #B4A069; background: #B4A069; height: 5px;" />
						
					</section>
					
					<section>
						<!--h2>GraspController: A simple Template Class </h2-->
						<h2>GraspController: Globals </h2>
						
						<hr style="color: #B4A069; background: #B4A069; height: 5px;" />
							<pre><code class="csharp" style="text-align: left; margin-left: 2em; font-size: 50%">
using UnityEngine;
using System.Collections;
/// <summary>
/// Grasp controller. Does not work so well, pinching is okay, but for power grasps the calculations are not very well suited...
/// </summary>
public class GraspController : MonoBehaviour {
  // grasp parameter
  // is something grasped?
  private bool grasped;
  // as noted above it would be nice if objects can only be grasped if the grippers are on opposite sites of the object.
  // this check can be realized via an angular constraint for instance
  private float minAngleBetweenContactPoints = 60.0f;
  // current center point of the grasp
  private Vector3 graspCenter;
  // difference between object rotation and palm rotation
  private Quaternion rotationFromPalm;
  // rotation of the hand palm
  private Quaternion palmRotation;
  // initial distance between grasp center and the center of the grasped object
  private Vector3 graspOffset;
  // the initial aperture
  private float initialAperture;
  // visualisation effects should be realized in instances of GraspVisuals, this might include the particle system which indicates a
  // successful grasp
  private GraspVisuals graspVisuals;
  // finger tip scripts which should monitor collisions
  private GripNotifier[] fingerTips;
							</code></pre>
						<hr style="color: #B4A069; background: #B4A069; height: 5px;" />
						
					</section>
					
					<section>
						<!--h2>GraspController: A simple Template Class </h2-->
						<h2>GraspController: Suggested Processing </h2>
						
						<hr style="color: #B4A069; background: #B4A069; height: 5px;" />
							<pre><code class="csharp" style="text-align: left; margin-left: 2em; font-size: 50%">
void Update () {
  // obtain the hand model
  HandModel model = null;
  if (model != null) {
    // get the palm rotation
  }
  // check grasp
  if (this.getNumberOfContacts() >= 2) {
    // get possibly grasped object
    GameObject graspCandidate = this.getObjectCandidate();
    if (graspCandidate != null) {
      // check grasp conditions and initialize the grasp
      if (!this.grasped) {
        // if the object was not graped before...
        this.initialAperture = this.getMaxAperture(graspCandidate);
        float angleBetweenContactPoints = this.getMaxAngle(graspCandidate);
        // we check the positioning of the gripper with respect to the object center  
        if (angleBetweenContactPoints >= this.minAngleBetweenContactPoints) {
          // initialize the grasp
          this.grasped = true;
        }
      } else {
        // check grasp point
        Vector3 cGraspCenter = this.getGraspCenter(graspCandidate);
        if (true/*grasping center is within object*/) {
          // update position and rotation
          // update the visuals if necessary
        }
      }
    } else {
      this.grasped = false;
      // stop visualizations if necessary
    }
  } else {
    this.grasped = false;
    // stop visualizations if necessary
  }
}
							</code></pre>
						<hr style="color: #B4A069; background: #B4A069; height: 5px;" />
						
					</section>
					
				</section>
				
				<section>
				
					<section>
						<h2> Overview </h2>
						
						<hr style="color: #B4A069; background: #B4A069; height: 5px;" />
						<ul style="text-align: center; list-style-type: none">
							<li> Leap API </li>
							<li> Tasks</li>
							<li> <b style="color: #B4A069; font-size: 35px"> Issues </b> </li>
						</ul>
						
						<hr style="color: #B4A069; background: #B4A069; height: 5px;" />
					</section>
					
					<section>
						<h2> Possible Problems: Multiple Endeffectors </h2>
						
						<hr style="color: #B4A069; background: #B4A069; height: 5px;" />
							<ul style="text-align: left; margin-left: 2em">
								<li> how to <b style="color: #A51E37">add the grasp scripts</b>? </li>
								<li> how to define the <b style="color: #A51E37">grasp center</b>? </li>
								<li> how many <b style="color: #A51E37">contacts</b> are needed? </li>
								<li> how to obtain the <b style="color: #A51E37">grasping angle</b>? </li>
								<li> how to calculate <b style="color: #A51E37">grip aperture</b>? </li>
							</ul>
						<hr style="color: #B4A069; background: #B4A069; height: 5px;" />
						
					</section>
					
					<section>
						<h2> Possible Problems: Some Suggestions </h2>
						
						<hr style="color: #B4A069; background: #B4A069; height: 5px;" />
							<ul style="text-align: left; margin-left: 2em">
								<li> add the grasp scripts upon initialization </li>
								<li> keep track of the position of the finger tips </li>
								<li> define a hardcoded threshold for the number of required contacts </li>
								<li> calculate the grasping angle between all tips, but consider only the largest one </li>
								<li> define the aperture in terms of maximal or mean distance between finger tips </li>
							</ul>
						<hr style="color: #B4A069; background: #B4A069; height: 5px;" />
						
					</section>
					
				</section>
				
				<section>
				<!--  section data-background="images/logos/logo_combined.png"-->
						<h1>Merci für's Zuhören.</h1>
				</section>
			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				//theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: 'linear', // default/cube/page/concave/zoom/linear/fade/none

				// Parallax scrolling
				parallaxBackgroundImage: "images/imgs/LeapMotion.jpg",
				parallaxBackgroundSize: '2560px 1440px',
				
				leap: {
					naturalSwipe   : false,    // Invert swipe gestures
					pointerOpacity : 0.5,      // Set pointer opacity to 0.5
					pointerColor   : '#d80000' // Red pointer
				},

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/leap/leap.js', async: true }
				]
			});

		</script>

	</body>
</html>